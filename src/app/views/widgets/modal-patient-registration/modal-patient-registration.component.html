<div class=""style="width: 100%">
  <div *ngFor="let alert of alerts">
    <ngb-alert *ngIf="alert" type="{{cssAlertType(alert)}}" (close)="removeAlert(alert)">{{ alert.message }}</ngb-alert>
  </div>
  <form style="" #f="ngForm" novalidate>
		<div class="fo_personal_detail_container shadow-4">
      <div class="fo_personal_detail_title header-2">
        <div>Personal Detail</div>
        <button type="button" class="close" aria-label="Close" (click)="close()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="fo_personal_detail form-group">
        <label for="mrNo" class="font-weight-bold">MR No: &nbsp;</label>{{model.mrlocal}}
        <label for="mrStatus" class="font-weight-bold">MR Status: &nbsp;</label>{{model.mrlocalStatus}}
        <label for="centralMrNo" class="font-weight-bold">Registration Date: &nbsp;</label>{{model.registerDate}}
        <label for="centralMrNo" class="font-weight-bold">Central MR No: &nbsp;</label>{{model.mrCentral}}
        <label for="centralMrNo" class="font-weight-bold">Patient Status: &nbsp;</label>{{model.patientStatusVal}}
        <label for="centralMrNo" class="font-weight-bold">Central Reg. Date: &nbsp;</label>{{model.CentralRegDate}}
        <label for="centralMrNo" class="font-weight-bold">Central Mr Status: &nbsp;</label>{{model.mrStatusVal}}
        <label for="merged" class="font-weight-bold">Merged to Central Mr No: &nbsp;</label>Data Missing
        <label for="deceasedDate" class="font-weight-bold">Deceased Date: &nbsp;</label>Data Missing
      </div>

      <div class="fo_personal_form d-flex justify-content-start">
        <div class="form-group fo_personal_form_left">
          <div class="form-group d-flex justify-content-between">
            <div class="form-pr-name">
              <label for="patientName" class="fo_requirement">Name *</label>
              <input type="text"
                     class="form-control"
                     id="patientName"
                     [(ngModel)]="model.patientName"
                     name="patientName" required>
            </div>
            <div class="form-pr-bdate">
              <label for="birthDate" class="fo_requirement">Birth Date *</label>
              <div class="input-group">
                <input [textMask]="{mask: mask_birth}" type="text" name="birth" placeholder="Search dob" class="form-control" [(ngModel)]="model.birth" placeholder="dd-mm-yyyy"/>
                <!-- <button type="button"
                        class="fo_btn_search"
                        (click)="findMatchPatient(comparePatient)">
                  <img src="../../../../assets/icons/ic_Search_white@2x.png">
                </button> -->
              </div>

            </div>
          </div>
          <div class="">
            <label for="spouseName" class="">Spouse Name</label>
            <div class="form-group">
              <input type="text"
                     class="form-control"
                     id="spouseName"
                     [(ngModel)]="model.spouseName"
                     name="spouseName" placeholder="(Optional)">
            </div>
            <label for="fatherName" class="">Father Name</label>
            <div class="form-group">
              <input type="text"
                     class="form-control"
                     id="fatherName"
                     [(ngModel)]="model.fatherName"
                     name="fatherName" placeholder="(Optional)">
            </div>
            <label for="motherName" class="">Mother Name</label>
            <div class="form-group">
              <input type="text"
                     class="form-control"
                     id="motherName"
                     [(ngModel)]="model.motherName"
                     name="motherName" placeholder="(Optional)">
            </div>
          </div>
        </div>
        <div class="fo_personal_form_middle">
          <div class="form-group">
            <div class="form-group">
              <label for="centralMrNo" class="">Title</label>
              <div>
                <select class="form-control" [(ngModel)]="model.title" name="title">
                  <option selected>Optional</option>
                  <option *ngFor = "let itr of listTitle" [ngValue]="itr">{{itr.description}}</option>
                </select>
              </div>
            </div>

            <div class="form-pr-sex form-group">
              <label for="centralMrNo" class="">Sex *</label>
              <div>
                <select id="sex" class="form-control"  [(ngModel)]="model.sex" name="sex" required>
                  <option *ngFor = "let itr of listSex" [ngValue]="itr">
                    {{itr.description}}
                  </option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="centralMrNo" class="">Blood Type</label>
              <div>
                <select id="bloodType" class="form-control"  [(ngModel)]="model.bloodType" name="bloodType">
                  <option *ngFor = "let itr of listBloodType" [ngValue]="itr">{{itr.description}}</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="religion" class="">Religion</label>
              <div>
                <select id="religion" class="form-control"  [(ngModel)]="model.religion" name="religion">
                  <option *ngFor = "let itr of listReligion" [ngValue]="itr">{{itr.description}}</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="fo_personal_form_right">
          <div class="form-group">
            <label for="marital" class="">Marital Status</label>
            <div class="form-group" style="width: 40%">
              <select id="marital" class="form-control"  [(ngModel)]="model.maritalStatus" name="marital">
                <option *ngFor = "let itr of listMarital" [ngValue]="itr">{{itr.description}}</option>
              </select>
            </div>
            <label for="birthPlace" class="">Birth Place</label>
            <div class="form-group">
              <input class="form-control"
                     ngui-auto-complete
                     auto-select-first-item="true"
                     max-num-list="10"
                     placeholder="(Optional)"
                     value-formatter="name"
                     list-formatter="name"
                     [match-formatted]="true"
                     min-chars="3"
                     [source]="listCity"
                     name="birthPlace"
                     [(ngModel)] = "model.birthPlace"
              >
            </div>
            <label for="notes" class="">Notes</label>
            <div class="form-group">
              <textarea type="text" class="form-control" id="notes" [(ngModel)]="model.notes"
                        name="notes" placeholder="(Optional)"></textarea>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="fo_personal_detail_container shadow-4">
      <ngb-tabset>
        <ngb-tab>
          <ng-template ngbTabTitle><b>Contact Detail</b></ng-template>
          <ng-template ngbTabContent>
            <div id="fo_id_contact_detail">
            <div class="fo_contact_detail fo_personal_form d-flex justify-content-start ">
                <div class="fo_contact_detail_left">
                  <div class="form-group">
                    <div class="form-pr-address">
                      <label for="address" class="">Address *</label>
                      <div class="">
                        <textarea class="form-control" id="comment"  [(ngModel)]="model.address" name="address" id="address" required></textarea>
                      </div>
                    </div>
                    <div class="form-pr-city">
                      <label for="city" class="">City *</label>
    
                      <div class="">
                        <input class="form-control"
                                ngui-auto-complete
                                auto-select-first-item="true"
                                max-num-list="10"
                                placeholder="City"
                                value-formatter="name"
                                list-formatter="name"
                                [match-formatted]="true"
                                min-chars="3"
                                [source]="listCity"
                                name="city"
                                [(ngModel)] = "model.city"
                                (change) = "getDetailAddress()">
                      </div>
                    </div>
    
                    <div class="form-pr-district">
                      <label for="city" class="">District *</label>
                      <div class="">
                        <select id="district"
                                class="form-control"
                                (change)= "findSubdistrict($event)"
                                name="district"
                                required>
                          <option *ngFor = "let itr of listDistrict" [ngValue]="itr" [selected]="itr.district_id == model.district.district_id">{{itr.name}}</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between">
                    <div class="form-pr-subdistrict" style="width: 60%">
                      <label for="city" class="">Sub District *</label>
                      <div class="">
                        <select id="subdistrict" class="form-control" name="subdistrict"
                        (change)= "selectSubdistrict($event)" required>
                          <option *ngFor = "let itr of listSubdistrict" [ngValue]="itr" [selected]="itr.sub_district_id == model.subdistrict.sub_district_id">{{itr.name}}</option>
                        </select>
                      </div>
                    </div>
                    <div>
                      <label for="postCode" class="">Post Code</label>
                      <div class="">
                        <input type="text"
                                class="form-control"
                                id="postCode"
                                [(ngModel)]="model.postCode"
                                name="postCode" placeholder="(Optional)">
                      </div>
                    </div>
                  </div>
                  <div class="form-pr-nationality">
                    <label for="nationality" class="">Nationality *</label>
                    <div class="">
                      <input class="form-control"
                              ngui-auto-complete
                              auto-select-first-item="true"
                              max-num-list="10"
                              placeholder="Nationality"
                              value-formatter="name"
                              list-formatter="name"
                              [match-formatted]="true"
                              min-chars="3"
                              [source]="listCountry"
                              name="nationality"
                              [(ngModel)] = "model.nationality">
                    </div>
                  </div>
                </div>
                <div class="fo_contact_detail_middle">
                  <div class="form-pr-homeno">
                    <label for="postCode" class="">Home Phone No</label>
                    <div class="">
                      <input type="text"
                              [textMask]="{mask: mask}"
                              class="form-control"
                              id="homePhone"
                              [(ngModel)]="model.homePhone"
                              name="homePhone" placeholder="(Optional)">
                    </div>
                  </div>
                  <div class="form-pr-officeno">
                    <label for="postCode" class="">Office Phone No</label>
                    <div class="">
                      <input type="text" class="form-control"
                              [textMask]="{mask: mask}"
                              id="officePhone"
                              [(ngModel)]="model.officePhone"
                              name="officePhone" placeholder="(Optional)">
                    </div>
                  </div>
                  <div class="d-flex justify-content-between">
                    <div class="form-pr-mobile1no">
                      <label for="postCode" class="">Mobile No 1</label>
                      <div class="">
                        <input type="text"
                                [textMask]="{mask: mask}"
                                class="form-control"
                                id="mobileNo1"
                                [(ngModel)]="model.mobileNo1"
                                name="mobileNo1" placeholder="(Optional)">
                      </div>
                    </div>
                    <div class="form-pr-mobile2no">
                      <label for="postCode" class="">Mobile No 2</label>
                      <div class="">
                        <input type="text"
                                [textMask]="{mask: mask}"
                                class="form-control"
                                id="mobileNo2"
                                [(ngModel)]="model.mobileNo2"
                                name="mobileNo2" placeholder="(Optional)">
                      </div>
                    </div>
                  </div>
                  <label for="postCode" class="">Email Address</label>
                  <div class="">
                    <input type="email" class="form-control"
                            id="email"
                            [(ngModel)]="model.email"
                            name="email" placeholder="(Optional)">
                  </div>
                  <label for="postCode" class="">Allergy</label>
                  <div class="">
                    <input type="text"
                            class="form-control"
                            [(ngModel)]="model.allergy"
                            name="allergy"
                            id="allergy" placeholder="(Optional)" >
                  </div>
                  <div class="d-flex justify-content-between">
                    <div>
                      <label for="city" class="">Payer</label>
                      <div class="">
                        <input class="form-control"
                                ngui-auto-complete
                                auto-select-first-item="true"
                                max-num-list="10"
                                placeholder="Payer Name"
                                value-formatter="name"
                                list-formatter="name"
                                [match-formatted]="true"
                                min-chars="3"
                                [source]="listPayer"
                                name="payer"
                                [(ngModel)] = "model.payer" placeholder="(Optional)">
                      </div>
                    </div>
                    <div>
                      <label for="postCode" class="">Payer Id No</label>
                      <div class="">
                        <input type="text"
                                class="form-control"
                                [(ngModel)]="model.payerIdNo"
                                name="payerIdNo"
                                id="payerIdNo" placeholder="(Optional)">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="fo_contact_detail_right">
                  <div class="d-flex justify-content-between">
                    <div>
                      <label for="city" class="">National Id Type</label>
                      <div class="">
                        <select id="subdistrict" class="form-control"
                                [(ngModel)]="model.nationalidType" name="nationalidType">
                          <option *ngFor = "let itr of listNationalIdType" [ngValue]="itr">{{itr.description}}</option>
                        </select>
                      </div>
                    </div>
                    <div>
                      <label for="postCode" class="">National Id No</label>
                      <div class="">
                        <input type="text"
                                class="form-control"
                                id="nationalIdNo"
                                [(ngModel)]="model.nationalIdNo"
                                name="nationalIdNo" placeholder="(Optional)">
                      </div>
                    </div>
                  </div>
                  <label for="scanKTP" class="">Scan KTP</label>
                  <div class="">
                    <input type="file" accept="image/*"
                            class="form-control-file" id="scanKTP"
                            (change)="readUrl($event)">
                    <!-- <img [src]="url" > -->
                  </div>
    
                  <div class="">
                    <img *ngIf="url" [src]="url" height="100px" width="100px">
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab>
          <ng-template ngbTabTitle><b>Permanent Address</b></ng-template>
          <ng-template ngbTabContent>
            <div id="fo_id_permanent_address">
                <div class="fo_permanent_address fo_personal_form">
                    <div class="form-group ">
                      <label for="address" class="">Permanent Address</label>
                      <div class="">
                        <textarea class="form-control" s="2" id="comment"  [(ngModel)]="model.permanentAddress"
                                  name="permanentAddress" id="permanentAddress" placeholder="(Optional)"></textarea>
                      </div>
                    </div>
                    <div class="d-flex justify-content-between">
                      <div class="form-group ">
                        <label for="city" class="">Permanent City</label>
                        <div class="">
                          <input class="form-control"
                                 ngui-auto-complete
                                 auto-select-first-item="true"
                                 max-num-list="10"
                                 placeholder="(Optional)"
                                 value-formatter="name"
                                 list-formatter="name"
                                 [match-formatted]="true"
                                 min-chars="3"
                                 z-index="2"
                                 [source]="listCity"
                                 name="permanentCity"
                                 [(ngModel)] = "model.permanentCity">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="postCode" class="">Permanent Post Code</label>
                        <div class="">
                          <input type="text"
                                 class="form-control"
                                 [(ngModel)]="model.permanentPostCode"
                                 name="permanentPostCode"
                                 id="permanentPostCode"
                                 placeholder="(Optional)">
                        </div>
                      </div>
                    </div>
                  </div>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab>
          <ng-template ngbTabTitle><b>Emergency Contact Detail</b></ng-template>
          <ng-template ngbTabContent>
            <div id="fo_id_emergency_contact">
              <div class="form-group fo_emergency_contact fo_personal_form d-flex justify-content-start">
                  <div class="fo_emergency_contact_left">
                    <div class="form-pr-contactname">
                      <label for="postCode" class="">Contact Name *</label>
                      <div class="">
                        <input type="text"
                                class="form-control"
                                [(ngModel)]="model.contactName"
                                name="contactName"
                                id="contactName" required>
                      </div>
                    </div>
                    <label for="address" class="">Contact Address</label>
                    <div class="">
                      <textarea class="form-control" s="2" placeholder="(Optional)"
                            [(ngModel)]="model.contactAddress" name="contactAddress" id="contactAddress"></textarea>
                    </div>
                    <label for="city" class="">Contact City</label>
                    <div class="" style="width: 50%">
                      <input class="form-control"
                              ngui-auto-complete
                              auto-select-first-item="true"
                              max-num-list="10"
                              placeholder="(Optional)"
                              value-formatter="name"
                              list-formatter="name"
                              [match-formatted]="true"
                              min-chars="3"
                              [source]="listCity"
                              name="contactCity"
                              [(ngModel)] = "model.contactCity">
                    </div>
                  </div>
      
      
                  <div class="fo_emergency_contact_right">
                    <div class="form-pr-contactphoneno">
                      <label for="postCode" class="">Contact Phone No</label>
                      <div class="number">
                        <input type="text" class="form-control"
                                [textMask]="{mask: mask}"
                                [(ngModel)]="model.contactPhone"
                                name="model.contactPhone"
                                id="model.contactPhone" placeholder="(Optional)">
                      </div>
                    </div>
                    <div class="form-pr-contactmobileno">
                      <label for="postCode" class="">Contact Mobile No</label>
                      <div class="number">
                        <input type="text" class="form-control"
                                [textMask]="{mask: mask}"
                                [(ngModel)]="model.contactMobile" name="contactMobile"
                                id="contactMobile" placeholder="(Optional)">
                      </div>
                    </div>
                    <label for="postCode" class="">Contact Email</label>
                    <div class="">
                      <input type="text" class="form-control" id="contactEmail" placeholder="(Optional)"
                              [(ngModel)]="model.contactEmail" name="contactEmail">
                    </div>
                  </div>
                </div>
            </div>
          </ng-template>
        </ngb-tab>
      </ngb-tabset>
    </div>

		<div class="col-md-12" style="text-align: left">
      <div *ngFor="let alert of alerts">
        <ngb-alert *ngIf="alert" type="{{cssAlertType(alert)}}" (close)="removeAlert(alert)">{{ alert.message }}</ngb-alert>
      </div>
		</div>

		<div class="">
			<div class="form-group d-flex justify-content-end">

			  <button type="submit"
                class="fo_btn_registration fo_btn_save"
                [disabled]="f.submitted && isButtonSave"
                [ngStyle]="{ background: f.submitted && isButtonSave ? '#A5C39F' : '#4D9B35'}"
                (click)="savePatient()">Save</button>

        <button type="button" class="fo_btn_registration fo_btn_reset" (click)="reset()">
          Reset
        </button>
			</div>
		</div>
    </form>
</div>