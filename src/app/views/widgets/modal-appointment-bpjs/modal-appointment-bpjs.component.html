<div class="modal-header">
  <div class="header-2 modal-padding"><strong>Edit Appointment List</strong></div>
  <button #close_btn_reschedule type="button" class="close" aria-label="Close" (click)="close()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body search-patient-modal">
  <div class="">
    <div class="col-md-12" style="padding: 0">
      <table class="table table-bordered">
        <thead class="body-text bold">
        <th style="min-width: 10vw">Patient Name</th>
        <th style="width: 1%; min-width: 4vw; text-align: center">MR No.</th>
        <th style="white-space: nowrap; min-width:3vw; width: 1%">Date of Birth</th>
        <th>Mobile No.</th>
        <th style="white-space: nowrap">Appo. Date</th>
        <th>Time Slot</th>
        <th style="min-width: 10vw">Doctor</th>
        <th style="width: 1%;">Waiting List</th>
        <th>Queue No.</th>
        <th>Created By</th>
        <th style="text-align: center;width: 1%">Note</th>
        </thead>
        <tbody>
        <tr>
          <td>{{ appointment.contact_name }}</td>
          <td>{{ appointment.medical_record_number }}</td>
          <td>{{ appointment.birth_date }}</td>
          <td>
            <input type="text" style="width: 8vw" [(ngModel)]="editModel.phoneNo" [value]="appointment.phone_number">
          </td>
          <td>{{ appointment.appointment_date }}</td>
          <td style="white-space: nowrap">{{ appointment.from_time }} - {{ appointment.to_time }}</td>
          <td>
            {{ appointment.doctor_name }}
          </td>
          <td>
            <span *ngIf="appointment.is_waiting_list === false">No</span>
            <span *ngIf="appointment.is_waiting_list === true">Yes</span>
          </td>
          <td>{{ appointment.queue_number }}</td>
          <td>{{ appointment.created_name }}</td>
          <td>
            <textarea [(ngModel)]="rescheduleSelected.note">{{ appointment.appointment_note }}</textarea>
          </td>
        </tr>
        </tbody>


      </table>
    </div>
    <div class="col-md-12" *ngIf="specialtyDoctor">
      <div class="row">
        <div class="col-md-3" style="padding: 0">
          <span style="color: red;">*Please find a doctor first</span>
          <select id="doctor" [disabled]="isReschNonBpjs" (change)="searchSchedule1(true)" style="width: 20em;" class="form-control"  [(ngModel)]="doctorVal" name="doctor" required>
            <option *ngFor = "let doctor of doctorBySpecialty" [ngValue]="doctor">
              {{doctor.name}}
            </option>
          </select>
        </div>
        <div class="col-md-2" style="padding: 0" hidden>
          <button class="ms_btn_border" [ngClass]="isReschNonBpjs == false ? 'ms_btn_blue' : 'ms_btn_darkgrey'"
            style="padding: 0.3vw 0vw; width: 11vw; margin-top: 1.3vw;" (click)="rescheduleToNonBpjs()">
              Reschedule to non BPJS
          </button>
        </div>
        <div class="col-md-4" style="padding: 0" hidden>
          <button class="btn ms_btn_border ms_btn_green" [disabled]="!directNonBPJS"
          style="padding: 0.3vw 0vw; width: 11vw; margin-top: 1.3vw"
          (click)="openConfirmationModal(direct_bpjs)">
            Change to non BPJS
        </button>
        </div>
      </div>

      <div class="row" style="margin-top: 2em;" *ngIf="isReschNonBpjs">
        <div class="col-md-3" style="padding: 0">
          <span style="color: red;">*Please find a doctor first (non BPJS schedule)</span>
          <select id="doctor" [disabled]="!isReschNonBpjs" (change)="searchSchedule1(false)" style="width: 20em;" class="form-control"  [(ngModel)]="doctorValNonBpjs" name="doctor" required>
            <option *ngFor = "let doctor of doctorBySpecialty" [ngValue]="doctor">
              {{doctor.name}}
            </option>
          </select>
        </div>
      </div>

      <div [style.display]="flag" *ngIf="!isReschNonBpjs && openWidget === true">
        <app-widget-doctor-schedule
        (opScheduleSelected)="getScheduleData($event)">
        </app-widget-doctor-schedule>
      </div>

      <div [style.display]="flagTwo" *ngIf="isReschNonBpjs && openWidget === true">
        <app-widget-doctor-schedule
        (opScheduleSelected)="getScheduleData($event)">
        </app-widget-doctor-schedule>
      </div>
      
      <div style="height:5vw; clear:both;"></div>
      <app-widget-create-appointment
        *ngIf="opScheduleSelected && openWidgetCreateApp"
        (opSlotSelected)="getSlotData($event)"
        [appointmentPayloadInput]="createAppInputData">
      </app-widget-create-appointment>
    </div>
  </div>
</div>
<div class="modal-footer">
  <div class="col-md-3">
    <p>
      <strong>Created By : </strong>
      {{ appointment.created_name }}
    </p>
    <p>
      <strong>Created Date : </strong>
      {{ appointment.created_date }}
    </p>
  </div>
  <div class="col-md-5">
    <p>
      <strong>Last Modified By : </strong>
      {{ appointment.modified_name }}
    </p>
    <p>
      <strong>Last Modified Date : </strong>
      {{ appointment.modified_date }}
    </p>
  </div>
  <div class="col-md-4" style="text-align: right">
    <button class="ms_btn_border ms_btn_black" style="padding: 0.3vw 0vw; width: 7vw" #close_btn_reschedule aria-label="Close" (click)="close()">Cancel</button>
    <button class="ms_btn_border ms_btn_green" style="padding: 0.3vw 0vw; width: 7vw" (click)="updateAppointment()" (click)="close()">Save & Close</button>
  </div>

  <ng-template #direct_bpjs let-modal>
    <div class="modal-header">
      <div class="header-2 modal-padding">Confirmation</div>
    </div>
    <div class="modal-body">
      <b>This action will change BPJS app to Regular app without change time slot app. </b>Are you sure to proceed?
    </div>
    <div class="modal-footer">
      <button type="button" class="btn ms_btn_black" (click)="modal.close()">Cancel</button>
      <button class="btn ms_btn_green" [ngClass]="{'disable': confirmBut}"
       (click)="directChangeToNonBPJS()" (click)="close()" (click)="modal.close()">Confirm</button>
    </div>
  </ng-template>