<div>
  <div class="container-appointment-input">
    <div class="filter-box">
      <span class="foot-note">Appointment date</span>
      <div class="date-picker-element">
        <my-date-range-picker name="mydaterange" [options]="myDateRangePickerOptions" [(ngModel)]="datePickerModel"
          (dateRangeChanged)="changeDateRange($event)" #date>
        </my-date-range-picker>
      </div>
    </div>
  </div>

  <div class="ms_container ms_shadow_4" id="tutorial_reschedule_table">
    <table class="table">
      <thead>
        <tr>
          <th class="header-2" colspan="11" style="padding: 0.5vw 1.5vw">Appointment BPJS</th>
        </tr>
        <tr>
          <th><input type="checkbox" (click)="CheckAllOptions()" [(ngModel)]="checkAll"></th>
          <th>Booking Date</th>
          <th width="100px">BPJS Number</th>
          <th>Referral Number</th>
          <th width="100px" style="white-space: nowrap">Speciality</th>
          <th>Preferred App Date</th>
          <th>Hospital</th>
          <th>Phone Number</th>
          <th>Note</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>

        <!-- <tr>
          <td>
            <div class="inner-addon right-addon">
              <input type="text" class="form-control filter-input filter" placeholder="Filter by name"
                [(ngModel)]="keywordsModel.patientName" />
            </div>
          </td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td style="white-space: nowrap">
            <div class="tab-pane fade show active" id="doctor-pane" role="tabpanel" aria-labelledby="home-tab">
              <div class="form-group">
                <div class="ng-autocomplete" class="angular-autocomplete">
                  <ng-autocomplete placeHolder="Search Doctor..." [data]="doctors" searchKeyword="name"
                    (selected)='getRescheduleWorklist($event)' [itemTemplate]="itemTemplateDoctor"
                    [notFoundTemplate]="notFoundTemplate">
                  </ng-autocomplete>

                  <ng-template #itemTemplateDoctor let-item>
                    <a [innerHTML]="item.name"></a>
                  </ng-template>

                  <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                  </ng-template>
                </div>
              </div>
            </div>
          </td>
          <td></td>
          <td></td>
          <td></td>
        </tr> -->

        <!-- <tr *ngFor="let r of rescheduledAppointments; let i = index">
          <td><input type="checkbox" style="margin-top: 0.7vw" [(ngModel)]="r.checked" [value]="r.checked"></td>
          <td>
            <a href="javascript:void(0)" (click)="openRescheduleModal(r)">
              {{r.patient_name != null ? r.patient_name.substr(0,30) : ''}}</a>
          </td>
          <td>{{ r.medical_record_number }}</td>
          <td>{{ r.birth_date }}</td>
          <td style="white-space: nowrap">{{ r.appointment_date }}</td>
          <td>{{ r.appointment_from_time }} - {{ r.appointment_to_time }}</td>
          <td>{{ r.hospital_alias }}</td>
          <td>{{ r.phone_number_1 }}</td>
          <td><a ngbPopover="{{r.note}}" popoverTitle=""
              triggers="mouseenter:mouseleave">{{r.note && r.note.length > 30 ? r.note.substr(0,30)+"..." : r.note}}</a>
          </td>
          <th>empty</th>
          <td><button class="btn fo_btn_green" (click)="openModal(r, searchPatientBpjs)">create apppointment</button></td>
        </tr> -->
        <tr *ngFor="let r of rescheduledAppointments; let i = index">
          <td><input type="checkbox" style="margin-top: 0.7vw" [(ngModel)]="r.checked" [value]="r.checked"></td>
          <td>{{ r.appointment_date }}</td>
          <td>{{ r.identity_number }}</td>
          <td>{{ r.reference_no }}</td>
          <td style="white-space: nowrap">{{ r.poly_code }}</td>
          <td>{{ r.appointment_date }}</td>
          <td>{{ r.hospital_alias }}</td>
          <td>{{ r.phone_number_1 }}</td>
          <td></td>
          <th>empty</th>
          <td><button class="btn fo_btn_green" (click)="openModal(r, searchPatientBpjs)">create apppointment</button></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="pagination-bottom">
    <button *ngIf="isCanPrevPage" (click)="prevPage()" class="btn ms_btn_blue">
      <img src="{{assetPath}}icons/ic_ArrowRight_White.png"> Prev
    </button>
    <span style="width:10px">&nbsp;</span>
    <button *ngIf="isCanNextPage" (click)="nextPage()" class="btn ms_btn_blue">
      Next <img src="{{assetPath}}icons/ic_ArrowLeft_White.png">
    </button>
  </div>

  <ng-template #searchPatientBpjs let-c="close" let-x="dismiss">
  <div class="modal-header">
    <div class="header-2 modal-padding">Search Patient Data</div>
  </div>
  <div class="verifyFilter modal-body d-flex justify-content-start">
    <div class="body-text">
      <div>Search name</div>
      <div [ngClass]="{'warningLength': searchPatientModel.patientName && (searchPatientModel.patientName.length < 4)}">
        <input class="form-control" [(ngModel)]="searchPatientModel.patientName">
      </div>
    </div>
    <div class="body-text">
      <div>Search date of birth</div>
      <div class="input-group">
        <input [textMask]="{mask: maskBirth}" type="text" class="form-control" name="birth" [(ngModel)]="searchPatientModel.patientBirth" placeholder="dd-mm-yyyy"/>
      </div>
    </div>
    <div class="verifySearch" (click)="searchPatient()">
      <img src="../../../../assets/icons/ic_Search_white.png">
    </div>
  </div>
  <div style="margin: 15px" *ngIf="specialist">
      <strong>Hospital Name: </strong><br>
      <strong>Doctor Name: </strong><br>
      <strong>Specialty: </strong><br>
      <strong>Appointment Date: </strong><br>
      <strong>Appointment Time: </strong><br>
      <strong>Notes:<br></strong>
      <!-- <ul>
        <li *ngFor="let note of doctorNotes" style="color:red;font-size:16px">{{note.note}}</li>
      </ul> -->
  </div>
  <div *ngIf="(patientHope && !searchLoader)" class="scrollTable verifyTable">
    <table>
      <thead>
        <tr>
          <th>Patient</th>
          <th>Central</th>
          <th>Local</th>
          <th>Dob</th>
          <th>Mobile</th>
          <th>Address</th>
        </tr>
      </thead>
      <tbody [ngClass]="{'disable': confirmReschedule}">
        <tr *ngFor="let p of patientHope" [ngClass]="{'selectedVerify': patientSelected && (p.name == patientSelected.name && p.mrNo == patientSelected.mrNo)}" (click)="setVerifyPatient(p)">
          <td>{{p.name}}</td>
          <td>{{p.mrNo}}</td>
          <td>{{p.mrNoUnit}}</td>
          <td>{{p.birthDate}}</td>
          <td>{{p.mobileNo1}} <span *ngIf="p.mobileNo2"></span> {{p.mobileNo2}}</td>
          <td>{{p.address}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="modal-footer d-flex justify-content-start">
    you want create appointment ?
      <button class="btn ms_btn_blue" (click)="openAppBpjsModal()"
      style="padding: 0.3vw 0vw; width: 10vw; margin-left: 1vw">
        Create Appointment
      </button>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn ms_btn_black" data-dismiss="modal" (click)="x('Cross click')">Close</button>
    <button type="button" 
            class="btn ms_btn_green" data-toggle="modal" data-target="#confirming" 
            data-dismiss="modal">Verify Appointment</button>
  </div>
  </ng-template>

  <ng-template #create_contact let-modal let-c="close" let-x="dismiss">
    
  </ng-template>